<section class="section-container">
    <h2>Esta semana podes probar esta especialidad</h2>
    <div class="card-container" data-container="1"></div>
    <div class="card-container" data-container="2"></div>
    <div class="card-container" data-container="3"></div>
    <div class="card-container" data-container="4"></div>
    <button id="ver-pedido">Ver mi pedido</button>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#ver-pedido').click(function () {
                // Cambiar texto del bot칩n
                $(this).text('Seguir comprando');
                const purchases = JSON.parse(localStorage.getItem('purchases')) || [];
                const resumenPedido = $('.section-container');
                resumenPedido.html('');
                let total = 0;

                // Crear tabla din치micamente
                const tabla = document.createElement('table');
                tabla.classList.add('table');

                // Crear cabecera de la tabla
                const cabecera = document.createElement('thead');
                const filaCabecera = document.createElement('tr');
                const encabezados = ['Comida', 'Precio', 'Cantidad'];

                encabezados.forEach(function (encabezado) {
                    const th = document.createElement('th');
                    const texto = document.createTextNode(encabezado);
                    th.appendChild(texto);
                    filaCabecera.appendChild(th);
                });

                cabecera.appendChild(filaCabecera);
                tabla.appendChild(cabecera);

                // Crear cuerpo de la tabla
                const cuerpo = document.createElement('tbody');

                purchases.forEach(function (purchase) {
                    const fila = document.createElement('tr');

                    const celdaComida = document.createElement('td');
                    const textoComida = document.createTextNode(purchase.meal);
                    celdaComida.appendChild(textoComida);
                    fila.appendChild(celdaComida);

                    const celdaPrecio = document.createElement('td');
                    const textoPrecio = document.createTextNode(purchase.precio);
                    celdaPrecio.appendChild(textoPrecio);
                    fila.appendChild(celdaPrecio);

                    const celdaCantidad = document.createElement('td');
                    const textoCantidad = document.createTextNode(purchase.cantidad);
                    celdaCantidad.appendChild(textoCantidad);
                    fila.appendChild(celdaCantidad);

                    cuerpo.appendChild(fila);

                    total += purchase.precio * purchase.cantidad;
                });
                tabla.appendChild(cuerpo);
                resumenPedido.append(tabla);
                resumenPedido.append('Precio total: ' + total);

                // Agregar bot칩n 'comprar'
                const comprarBtn = $('<button>Comprar</button>');
                comprarBtn.addClass('table');
                resumenPedido.append(comprarBtn);
                comprarBtn.click(function () {
                    localStorage.removeItem('purchases');
                    if (total === 0) {
                        Swal.fire(
                            'Ohoo',
                            'No tenias comidas en tu pedido',
                            'question'
                        )
                    }
                    else {
                        Swal.fire(
                            'Genial',
                            'Su compra por el monto de $' + total + ' se realizo correctamente',
                            'success'
                        );
                    }
                    resumenPedido.html('');
                    comprarBtn.hide();
                    $('#ver-pedido').text('Ver mi pedido').show();
                });
                $('#ver-pedido').after(comprarBtn);

                // Ocultar contenido HTML din치mico
                $(this).hide();
            });
        });

    </script>

</section>